/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   client.c                                           :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: aprosper <aprosper@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2022/07/31 11:14:41 by aprosper          #+#    #+#             */
/*   Updated: 2022/07/31 12:35:40 by aprosper         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "minitalk.h"

void	bin_to_char(char c, int pid)
{
	int	i;

	i = 0;
	while (i <= 7)
	{
		if (c << i & 128)
			kill(pid, SIGUSR2);
		else
			kill(pid, SIGUSR1);
		usleep(100);
		i++;
	}
}

int	main(int argc, char **argv)
{
	int	pid;
	int	i;

	i = 0;
	pid = ft_atoi(argv[1]);
	if (argc != 3 || pid == 0)
	{
		write(1, "Invalid arguments !\n", 20);
		exit(EXIT_FAILURE);
	}
	while (argv[2][i])
		bin_to_char(argv[2][i++], pid);
	exit (EXIT_SUCCESS);
}

/*
void	bin_to_char(char c, int pid)
{
	int	i;

	i = 0;
	while (i <= 7)
	{
		if (c << i & 128)
		{
			printf("SIGUSR2 = %d\n", SIGUSR2); // 31 -> 1
			kill(pid, SIGUSR2);
		}
		else
		{
			printf("SIGUSR1 = %d\n", SIGUSR1); // 30 -> 0
			kill(pid, SIGUSR1);
		}
		usleep(100);
		i++;
	}
}
*/

/*
char c = 'a' == 97 == 0 1 1 0 0 0 0 1
i = 0
c << i & 128 == 0 1 1 0 0 0 0 1 << 0 & 1 0 0 0 0 0 0 0
-----------------------------------
c << 0 & 128

0 1 1 0 0 0 0 1
1 0 0 0 0 0 0 0
---------------
0 0 0 0 0 0 0 0

0 

c << 1 & 128
1 1 0 0 0 0 1 0
1 0 0 0 0 0 0 0
---------------
1 0 0 0 0 0 0 0

0 1

c << 2 & 128
1 0 0 0 0 1 0 0 
1 0 0 0 0 0 0 0
---------------
1 0 0 0 0 0 0 0

0 1 1

c << 3 & 128
0 0 0 0 1 0 0 0 
1 0 0 0 0 0 0 0
---------------
0 0 0 0 0 0 0 0		

0 1 1 0 

c << 4 & 128
0 0 0 1 0 0 0 0 
1 0 0 0 0 0 0 0
---------------
0 0 0 0 0 0 0 0

0 1 1 0 0

c << 5 & 128
0 0 1 0 0 0 0 0 
1 0 0 0 0 0 0 0
---------------
0 0 0 0 0 0 0 0	

0 1 1 0 0 0

c << 6 & 128
0 1 0 0 0 0 0 0 
1 0 0 0 0 0 0 0
---------------
0 0 0 0 0 0 0 0

0 1 1 0 0 0 0

c << 7 & 128
1 0 0 0 0 0 0 0
1 0 0 0 0 0 0 0
---------------
1 0 0 0 0 0 0 0

0 1 1 0 0 0 0 1
*/

/*
       0 nul    1 soh    2 stx    3 etx    4 eot    5 enq    6 ack    7 bel
       8 bs     9 ht    10 nl    11 vt    12 np    13 cr    14 so    15 si
      16 dle   17 dc1   18 dc2   19 dc3   20 dc4   21 nak   22 syn   23 etb
      24 can   25 em    26 sub   27 esc   28 fs    29 gs    30 rs    31 us
      32 sp    33  !    34  "    35  #    36  $    37  %    38  &    39  '
      40  (    41  )    42  *    43  +    44  ,    45  -    46  .    47  /
      48  0    49  1    50  2    51  3    52  4    53  5    54  6    55  7
      56  8    57  9    58  :    59  ;    60  <    61  =    62  >    63  ?
      64  @    65  A    66  B    67  C    68  D    69  E    70  F    71  G
      72  H    73  I    74  J    75  K    76  L    77  M    78  N    79  O
      80  P    81  Q    82  R    83  S    84  T    85  U    86  V    87  W
      88  X    89  Y    90  Z    91  [    92  \Â    93  ]    94  ^    95  _
      96  `    97  a    98  b    99  c   100  d   101  e   102  f   103  g
     104  h   105  i   106  j   107  k   108  l   109  m   110  n   111  o
     112  p   113  q   114  r   115  s   116  t   117  u   118  v   119  w
     120  x   121  y   122  z   123  {   124  |   125  }   126  ~   127 del
*/